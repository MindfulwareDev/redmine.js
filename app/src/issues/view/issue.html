<md-progress-linear ng-if="ctrl.loading" class="md-warn" md-mode="indeterminate"></md-progress-linear>

<md-button hide-on-scroll ng-if="ctrl.action === 'view'" class="md-fab md-fab-bottom-right md-primary" aria-label="Edit issue" ng-click="ctrl.editIssue()">
    <md-tooltip>Edit issue</md-tooltip>
    <md-icon>edit</md-icon>
</md-button>

<div ng-if="ctrl.action === 'view'" ng-show="ctrl.issue" ng-cloak layout-padding>
    <h3 class="md-subhead">
        <md-icon ng-class="ctrl.issueIconClass">{{ctrl.issueIcon}}</md-icon>
        <span>{{::ctrl.issue.tracker.name}} #{{::ctrl.issue.id}}</span>
    </h3>
    <h1 class="md-headline">{{::ctrl.issue.subject}}</h1>

    <div>
        <span class="issue-attribute">Author</span>
        <img class="avatar" ng-if="ctrl.author.avatar" ng-src="{{ctrl.author.avatar}}" />
        <md-icon ng-if="!ctrl.author.avatar">person</md-icon>
        <span>{{::ctrl.issue.author.name}}</span>
    </div>

    <h3 class="md-subhead">Description</h3>
    <div class="issue-description" ng-bind-html="ctrl.issue.description | textile"></div>

    <issue-details></issue-details>
    <related-issues></related-issues>
    <issue-history></issue-history>
</div>

<edit-issue ng-if="ctrl.action === 'edit'"></edit-issue>
